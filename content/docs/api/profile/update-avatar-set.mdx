---
title: Update Avatar Set
description: Customize user avatar appearance with modular component-based updates for personalization
---

import { Callout } from 'fumadocs-ui/components/callout';
import { Card, Cards } from 'fumadocs-ui/components/card';

<div className="relative overflow-hidden rounded-2xl border bg-gradient-to-br from-pink-600 via-rose-600 to-fuchsia-600 p-8 shadow-2xl mb-8">
  <div className="absolute inset-0 bg-grid-white/10 [mask-image:linear-gradient(0deg,transparent,black)]" />
  <div className="absolute top-0 right-0 w-96 h-96 bg-white/10 rounded-full blur-3xl"></div>
  <div className="relative">
    <div className="inline-flex items-center gap-2 rounded-full bg-white/20 px-4 py-1.5 text-xs font-medium text-white backdrop-blur-sm mb-4">
      <span>üé®</span>
      CUSTOMIZATION
    </div>
    <h1 className="text-4xl font-black text-white mb-3 tracking-tight">Update Avatar Set</h1>
    <p className="text-xl text-pink-100 leading-relaxed max-w-3xl">
      Customize avatar appearance with modular component-based updates for complete personalization control.
    </p>
  </div>
</div>

<Callout type="info" title="User Feature">
  This mutation is accessible to all **authenticated users** for personalizing their avatar appearance.
</Callout>

## Overview

The `updateAvatarSet` mutation enables users to customize their avatar by updating individual components grouped by categories. This is typically called when users save changes from the avatar customization interface (dress-up modal).

---

## GraphQL Schema

<div className="rounded-xl border border-pink-500/30 bg-gradient-to-br from-pink-500/10 to-rose-500/5 p-6 mb-8">

```graphql
mutation {
  updateAvatarSet(
    components: [AvatarSetInput]!
  ): [AvatarSet]
}
```

</div>

---

## Input Type

<div className="rounded-lg border border-rose-500/30 bg-background p-6 mb-6">
  <h3 className="font-bold mb-4">AvatarSetInput</h3>

  <div className="space-y-3">
    <div className="flex items-start gap-3">
      <code className="bg-pink-500/20 text-pink-700 dark:text-pink-300 px-2 py-1 rounded text-sm font-mono">groupId</code>
      <div className="flex-1">
        <span className="text-sm text-muted-foreground">String - The avatar component group identifier (e.g., "hair", "accessories", "clothing")</span>
      </div>
    </div>

    <div className="flex items-start gap-3">
      <code className="bg-rose-500/20 text-rose-700 dark:text-rose-300 px-2 py-1 rounded text-sm font-mono">compId</code>
      <div className="flex-1">
        <span className="text-sm text-muted-foreground">String (UUID) - The unique component ID to apply to this group</span>
      </div>
    </div>
  </div>
</div>

---

## Parameters

<div className="grid gap-4 my-6">
  <div className="rounded-lg border border-pink-500/30 bg-background p-5 shadow-sm hover:shadow-md transition-shadow">
    <div className="flex items-start justify-between mb-3">
      <h3 className="font-bold text-lg">components</h3>
      <span className="inline-flex items-center rounded-full bg-red-500/10 px-3 py-1 text-xs font-semibold text-red-700 dark:text-red-300">Required</span>
    </div>
    <p className="text-sm text-muted-foreground mb-2"><span className="font-mono text-pink-600 dark:text-pink-400">[AvatarSetInput]</span></p>
    <p className="text-sm text-foreground mb-3">
      An array of avatar component selections, each specifying a group and the component to apply to that group.
    </p>

    <div className="rounded bg-muted/50 p-3 mt-3">
      <div className="text-xs font-mono text-muted-foreground mb-2">Example Structure:</div>
      <code className="text-xs">
        [{'{'}groupId: "hair", compId: "uuid-123"{'}'}, {'{'}groupId: "eyes", compId: "uuid-456"{'}'}]
      </code>
    </div>
  </div>
</div>

---

## Return Value

<div className="rounded-lg border border-green-500/30 bg-gradient-to-br from-green-500/10 to-emerald-500/5 p-6 mb-6">
  <h3 className="font-bold mb-2 flex items-center gap-2">
    <span className="text-2xl">‚úì</span>
    Success Response
  </h3>
  <p className="text-sm text-foreground mb-3">
    Returns an array of <span className="font-mono text-green-600 dark:text-green-400">[AvatarSet]</span> objects representing the updated avatar component configuration.
  </p>

  <div className="rounded bg-background border border-green-500/30 p-4 mt-4">
    <div className="font-bold text-sm mb-2">AvatarSet Object:</div>
    <div className="space-y-1 text-sm font-mono text-muted-foreground">
      <div>‚Ä¢ <span className="text-green-600 dark:text-green-400">groupId</span>: String - Component group identifier</div>
      <div>‚Ä¢ <span className="text-green-600 dark:text-green-400">compId</span>: String - Applied component UUID</div>
    </div>
  </div>
</div>

---

## Example Usage

### Request

```graphql
mutation UpdateUserAvatar {
  updateAvatarSet(
    components: [
      {
        groupId: "hair"
        compId: "550e8400-e29b-41d4-a716-446655440001"
      }
      {
        groupId: "accessories"
        compId: "550e8400-e29b-41d4-a716-446655440002"
      }
      {
        groupId: "clothing"
        compId: "550e8400-e29b-41d4-a716-446655440003"
      }
    ]
  ) {
    groupId
    compId
  }
}
```

### Response

```json
{
  "data": {
    "updateAvatarSet": [
      {
        "groupId": "hair",
        "compId": "550e8400-e29b-41d4-a716-446655440001"
      },
      {
        "groupId": "accessories",
        "compId": "550e8400-e29b-41d4-a716-446655440002"
      },
      {
        "groupId": "clothing",
        "compId": "550e8400-e29b-41d4-a716-446655440003"
      }
    ]
  }
}
```

<Callout type="info" title="Avatar Updated">
  Successfully updated **3 avatar components**. Changes are immediately visible across the platform.
</Callout>

---

## Component Group Examples

<div className="grid gap-4 md:grid-cols-2 lg:grid-cols-3 my-6">
  <div className="rounded-lg border border-pink-500/30 bg-gradient-to-br from-pink-500/10 to-rose-500/5 p-5">
    <div className="text-3xl mb-3">üíá</div>
    <h4 className="font-bold mb-2">Hair Group</h4>
    <p className="text-xs text-muted-foreground mb-2">groupId: <code className="bg-pink-500/20 text-pink-700 dark:text-pink-300 px-1 rounded">hair</code></p>
    <p className="text-sm text-muted-foreground">
      Hairstyles, colors, and hair accessories
    </p>
  </div>

  <div className="rounded-lg border border-rose-500/30 bg-gradient-to-br from-rose-500/10 to-pink-500/5 p-5">
    <div className="text-3xl mb-3">üëÅÔ∏è</div>
    <h4 className="font-bold mb-2">Eyes Group</h4>
    <p className="text-xs text-muted-foreground mb-2">groupId: <code className="bg-rose-500/20 text-rose-700 dark:text-rose-300 px-1 rounded">eyes</code></p>
    <p className="text-sm text-muted-foreground">
      Eye shapes, colors, and expressions
    </p>
  </div>

  <div className="rounded-lg border border-fuchsia-500/30 bg-gradient-to-br from-fuchsia-500/10 to-purple-500/5 p-5">
    <div className="text-3xl mb-3">üëî</div>
    <h4 className="font-bold mb-2">Clothing Group</h4>
    <p className="text-xs text-muted-foreground mb-2">groupId: <code className="bg-fuchsia-500/20 text-fuchsia-700 dark:text-fuchsia-300 px-1 rounded">clothing</code></p>
    <p className="text-sm text-muted-foreground">
      Shirts, outfits, and costumes
    </p>
  </div>

  <div className="rounded-lg border border-purple-500/30 bg-gradient-to-br from-purple-500/10 to-pink-500/5 p-5">
    <div className="text-3xl mb-3">üíç</div>
    <h4 className="font-bold mb-2">Accessories Group</h4>
    <p className="text-xs text-muted-foreground mb-2">groupId: <code className="bg-purple-500/20 text-purple-700 dark:text-purple-300 px-1 rounded">accessories</code></p>
    <p className="text-sm text-muted-foreground">
      Jewelry, glasses, and other items
    </p>
  </div>

  <div className="rounded-lg border border-pink-500/30 bg-gradient-to-br from-pink-500/10 to-fuchsia-500/5 p-5">
    <div className="text-3xl mb-3">üé≠</div>
    <h4 className="font-bold mb-2">Face Group</h4>
    <p className="text-xs text-muted-foreground mb-2">groupId: <code className="bg-pink-500/20 text-pink-700 dark:text-pink-300 px-1 rounded">face</code></p>
    <p className="text-sm text-muted-foreground">
      Face shape, skin tone, and features
    </p>
  </div>

  <div className="rounded-lg border border-rose-500/30 bg-gradient-to-br from-rose-500/10 to-red-500/5 p-5">
    <div className="text-3xl mb-3">üé®</div>
    <h4 className="font-bold mb-2">Other Group</h4>
    <p className="text-xs text-muted-foreground mb-2">groupId: <code className="bg-rose-500/20 text-rose-700 dark:text-rose-300 px-1 rounded">other</code></p>
    <p className="text-sm text-muted-foreground">
      Background, effects, and special items
    </p>
  </div>
</div>

---

## Implementation Flow

<div className="rounded-xl border border-pink-500/30 bg-background p-6 my-6">
  <h3 className="font-bold mb-6">Avatar Customization Process</h3>

  <div className="flex flex-col md:flex-row items-center justify-between gap-4">
    <div className="flex-1 text-center">
      <div className="w-16 h-16 rounded-full bg-pink-500/20 border-2 border-pink-500 flex items-center justify-center text-2xl mx-auto mb-2">
        üé®
      </div>
      <div className="font-bold text-pink-700 dark:text-pink-300">Open Dress-up</div>
      <div className="text-xs text-muted-foreground">User clicks customize</div>
    </div>
    <div className="text-2xl text-muted-foreground">‚Üí</div>
    <div className="flex-1 text-center">
      <div className="w-16 h-16 rounded-full bg-rose-500/20 border-2 border-rose-500 flex items-center justify-center text-2xl mx-auto mb-2">
        üñ±Ô∏è
      </div>
      <div className="font-bold text-rose-700 dark:text-rose-300">Select Components</div>
      <div className="text-xs text-muted-foreground">Browse & choose items</div>
    </div>
    <div className="text-2xl text-muted-foreground">‚Üí</div>
    <div className="flex-1 text-center">
      <div className="w-16 h-16 rounded-full bg-fuchsia-500/20 border-2 border-fuchsia-500 flex items-center justify-center text-2xl mx-auto mb-2">
        üíæ
      </div>
      <div className="font-bold text-fuchsia-700 dark:text-fuchsia-300">Save Changes</div>
      <div className="text-xs text-muted-foreground">Update avatar set</div>
    </div>
  </div>
</div>

---

## Implementation Example

<div className="rounded-xl border border-rose-500/30 bg-background p-6 my-6">
  <h3 className="font-bold mb-4">Dress-up Modal Integration</h3>

```javascript
// Example: Avatar customization with live preview
function AvatarCustomizer() {
  const [selectedComponents, setSelectedComponents] = useState([]);

  const handleComponentSelect = (groupId, compId) => {
    // Update local state for preview
    setSelectedComponents(prev => {
      const filtered = prev.filter(c => c.groupId !== groupId);
      return [...filtered, { groupId, compId }];
    });
  };

  const saveAvatarChanges = async () => {
    try {
      const result = await graphqlClient.mutate({
        mutation: gql`
          mutation UpdateAvatar($components: [AvatarSetInput]!) {
            updateAvatarSet(components: $components) {
              groupId
              compId
            }
          }
        `,
        variables: {
          components: selectedComponents
        }
      });

      console.log("Avatar updated:", result.data.updateAvatarSet);
      showSuccessMessage("Avatar saved successfully!");
      closeModal();
    } catch (error) {
      console.error("Failed to update avatar:", error);
      showErrorMessage("Failed to save avatar changes");
    }
  };

  return (
    <div className="avatar-customizer">
      <AvatarPreview components={selectedComponents} />
      <ComponentSelector onSelect={handleComponentSelect} />
      <button onClick={saveAvatarChanges}>Save Avatar</button>
    </div>
  );
}
```

</div>

---

## Use Cases

<div className="grid gap-4 md:grid-cols-2 my-6">
  <Card className="p-6 hover:shadow-lg transition-shadow">
    <div className="text-3xl mb-3">üé®</div>
    <h3 className="font-bold mb-2">Personal Expression</h3>
    <p className="text-sm text-muted-foreground">
      Allow users to express individuality through customizable avatar components and unique style combinations
    </p>
  </Card>

  <Card className="p-6 hover:shadow-lg transition-shadow">
    <div className="text-3xl mb-3">üéÅ</div>
    <h3 className="font-bold mb-2">Unlockable Content</h3>
    <p className="text-sm text-muted-foreground">
      Reward users with exclusive avatar components for achievements, milestones, or special events
    </p>
  </Card>

  <Card className="p-6 hover:shadow-lg transition-shadow">
    <div className="text-3xl mb-3">üéâ</div>
    <h3 className="font-bold mb-2">Seasonal Updates</h3>
    <p className="text-sm text-muted-foreground">
      Enable themed avatar components for holidays, events, or limited-time promotions
    </p>
  </Card>

  <Card className="p-6 hover:shadow-lg transition-shadow">
    <div className="text-3xl mb-3">üë•</div>
    <h3 className="font-bold mb-2">Social Identity</h3>
    <p className="text-sm text-muted-foreground">
      Create distinctive visual identity for user profiles, chat, leaderboards, and community features
    </p>
  </Card>
</div>

---

## Best Practices

<div className="space-y-4 my-6">
  <div className="rounded-lg border-l-4 border-pink-500 bg-pink-500/10 p-4">
    <h4 className="font-bold text-pink-700 dark:text-pink-300 mb-1">üîç Component Validation</h4>
    <p className="text-sm text-pink-900 dark:text-pink-200">
      Validate component IDs exist before submitting to prevent errors from deleted or invalid components
    </p>
  </div>

  <div className="rounded-lg border-l-4 border-rose-500 bg-rose-500/10 p-4">
    <h4 className="font-bold text-rose-700 dark:text-rose-300 mb-1">üëÅÔ∏è Live Preview</h4>
    <p className="text-sm text-rose-900 dark:text-rose-200">
      Implement real-time preview in the UI before saving to improve user experience and reduce mistakes
    </p>
  </div>

  <div className="rounded-lg border-l-4 border-fuchsia-500 bg-fuchsia-500/10 p-4">
    <h4 className="font-bold text-fuchsia-700 dark:text-fuchsia-300 mb-1">üíæ Batch Updates</h4>
    <p className="text-sm text-fuchsia-900 dark:text-fuchsia-200">
      Update all changed components in a single mutation rather than multiple calls for better performance
    </p>
  </div>

  <div className="rounded-lg border-l-4 border-purple-500 bg-purple-500/10 p-4">
    <h4 className="font-bold text-purple-700 dark:text-purple-300 mb-1">üéØ Group Consistency</h4>
    <p className="text-sm text-purple-900 dark:text-purple-200">
      Ensure each group appears only once in the components array to avoid conflicts or undefined behavior
    </p>
  </div>

  <div className="rounded-lg border-l-4 border-pink-500 bg-pink-500/10 p-4">
    <h4 className="font-bold text-pink-700 dark:text-pink-300 mb-1">üîÑ State Management</h4>
    <p className="text-sm text-pink-900 dark:text-pink-200">
      Maintain local state for the customization UI and only persist changes when user explicitly saves
    </p>
  </div>
</div>

---

## Related Operations

<Cards>
  <Card title="Set Avatar" href="/docs/api/profile/set-avatar">
    Create initial avatar identity during registration
  </Card>
  <Card title="Get Avatar Components" href="/docs/api/avatar/get-avatar-components">
    Retrieve available components for customization
  </Card>
  <Card title="Get Components by Group" href="/docs/api/avatar/get-components-by-group">
    Browse components filtered by group
  </Card>
  <Card title="Avatar Profiles" href="/docs/api/avatar/get-avatar-profiles">
    View complete avatar profile configurations
  </Card>
</Cards>
