---
title: Send Withdraw Confirmation Code
description: Request SMS 2FA verification code for admin withdrawal approval operations
---

import { Callout } from 'fumadocs-ui/components/callout';
import { Card, Cards } from 'fumadocs-ui/components/card';

<div className="relative overflow-hidden rounded-2xl bg-gradient-to-br from-red-500/10 via-rose-500/5 to-background p-8 border border-red-500/20 mb-8">
  <div className="relative z-10">
    <h1 className="text-3xl md:text-4xl font-bold mb-4">
      Send Withdraw Confirmation Code
    </h1>
    <p className="text-lg text-muted-foreground mb-4">
      Request SMS 2FA verification code for secure admin withdrawal approvals
    </p>
    <div className="inline-block px-3 py-1 rounded-full bg-red-500/20 border border-red-500/30 text-red-400 text-sm font-medium">
      ADMIN Only
    </div>
  </div>
  <div className="absolute top-0 right-0 w-48 h-48 bg-red-500/5 rounded-full blur-3xl"></div>
</div>

## Overview

The `sendWithdrawConfirmCode` mutation enables administrators to request a 2FA SMS verification code required for approving or denying withdrawal requests. This adds an extra layer of security to the withdrawal approval process.

<Callout type="warn" title="Admin-Only Operation">
This mutation is accessible only to users with **ADMIN privileges**. The phone number is registered as a system property and does not need to be provided.
</Callout>

## GraphQL Schema

<div className="rounded-xl border border-red-500/30 bg-gradient-to-br from-red-500/10 to-red-500/5 p-6 my-6">
  <div className="flex items-center gap-3 mb-4">
    <span className="text-2xl">üì±</span>
    <div>
      <div className="font-bold text-lg">Mutation Schema</div>
      <div className="text-sm text-muted-foreground">Request admin 2FA SMS code</div>
    </div>
  </div>

  ```graphql
  sendWithdrawConfirmCode: Int
  ```
</div>

## Parameters

<div className="rounded-lg border border-border bg-muted/30 p-5 my-6">
  <div className="flex items-center gap-2 mb-3">
    <span className="text-lg">üìã</span>
    <span className="font-bold">No Parameters Required</span>
  </div>

  <div className="text-sm text-muted-foreground">
    This mutation does not require any input parameters. The admin's phone number is registered as a system property and is automatically used to send the SMS verification code.
  </div>
</div>

## Return Value

<div className="rounded-xl border border-green-500/30 bg-gradient-to-br from-green-500/10 to-green-500/5 p-6 my-6">
  <div className="flex items-center gap-3 mb-4">
    <span className="text-2xl">‚úÖ</span>
    <div>
      <div className="font-bold text-lg">Integer Response</div>
      <div className="text-sm text-muted-foreground">Success indicator</div>
    </div>
  </div>

  <div className="space-y-3">
    <div className="p-4 rounded-lg bg-background border border-border">
      <div className="font-semibold mb-2">Return Type: <code className="bg-muted px-2 py-1 rounded text-sm">Int</code></div>
      <div className="text-sm text-muted-foreground">
        Returns an integer indicating whether the SMS verification code request was successful. A non-zero value typically indicates success.
      </div>
    </div>
  </div>
</div>

## Example Mutation

<div className="my-6">
  <div className="font-bold mb-3 flex items-center gap-2">
    <span>üíª</span>
    <span>Request 2FA SMS Code</span>
  </div>

  ```graphql
  mutation {
    sendWithdrawConfirmCode
  }
  ```

  <div className="mt-4 p-4 rounded-lg border border-border bg-muted/30">
    <div className="font-semibold text-sm mb-2">Expected Response</div>
    ```json
    {
      "data": {
        "sendWithdrawConfirmCode": 1
      }
    }
    ```
  </div>
</div>

## Use Cases

<div className="grid grid-cols-1 md:grid-cols-2 gap-4 my-6">
  <div className="p-5 rounded-lg border border-border bg-muted/50">
    <div className="text-xl mb-2">‚úÖ</div>
    <div className="font-bold mb-2">Approve Withdrawals</div>
    <div className="text-sm text-muted-foreground">
      Request 2FA code before approving crypto or PayPal withdrawal requests
    </div>
  </div>

  <div className="p-5 rounded-lg border border-border bg-muted/50">
    <div className="text-xl mb-2">‚ùå</div>
    <div className="font-bold mb-2">Deny Withdrawals</div>
    <div className="text-sm text-muted-foreground">
      Secure denial operations with 2FA verification to prevent unauthorized actions
    </div>
  </div>

  <div className="p-5 rounded-lg border border-border bg-muted/50">
    <div className="text-xl mb-2">üè¶</div>
    <div className="font-bold mb-2">Bank Transfers</div>
    <div className="text-sm text-muted-foreground">
      Verify identity before confirming manual bank transfer completion
    </div>
  </div>

  <div className="p-5 rounded-lg border border-border bg-muted/50">
    <div className="text-xl mb-2">üîê</div>
    <div className="font-bold mb-2">Security Compliance</div>
    <div className="text-sm text-muted-foreground">
      Ensure all withdrawal approvals meet 2FA security requirements
    </div>
  </div>
</div>

## Implementation Example

<div className="my-6">
  <div className="font-bold mb-3">Full Implementation Flow</div>

  ```typescript
  // Admin withdrawal approval workflow
  async function processWithdrawalApproval(withdrawalId: number) {
    try {
      // Step 1: Request 2FA SMS code
      const codeRequest = await client.request(gql`
        mutation {
          sendWithdrawConfirmCode
        }
      `);

      if (!codeRequest.sendWithdrawConfirmCode) {
        throw new Error('Failed to send verification code');
      }

      console.log('‚úÖ SMS verification code sent to admin phone');

      // Step 2: Admin receives SMS and enters code
      const twoFactorCode = await promptForCode(); // UI prompt

      // Step 3: Approve withdrawal with 2FA code
      const approval = await client.request(gql`
        mutation ApproveWithdrawal($id: Int!, $code: String!) {
          confirmCryptoWithdraw(
            id: $id,
            status: 1,
            code: $code
          )
        }
      `, {
        id: withdrawalId,
        code: twoFactorCode
      });

      console.log('‚úÖ Withdrawal approved successfully');

    } catch (error) {
      console.error('‚ùå Withdrawal approval failed:', error);
    }
  }
  ```
</div>

## Security Features

<div className="rounded-xl border border-red-500/30 bg-gradient-to-br from-red-500/10 to-red-500/5 p-6 my-6">
  <div className="font-bold text-lg mb-4 flex items-center gap-2">
    <span>üîí</span>
    <span>Security Measures</span>
  </div>

  <div className="space-y-3">
    <div className="flex items-start gap-3 p-4 rounded-lg bg-background border border-border">
      <div className="text-xl">üì±</div>
      <div className="flex-1">
        <div className="font-bold text-sm">SMS 2FA Required</div>
        <div className="text-xs text-muted-foreground mt-1">
          All withdrawal approval operations require valid 2FA SMS verification codes
        </div>
      </div>
    </div>

    <div className="flex items-start gap-3 p-4 rounded-lg bg-background border border-border">
      <div className="text-xl">üîë</div>
      <div className="flex-1">
        <div className="font-bold text-sm">Pre-Registered Phone</div>
        <div className="text-xs text-muted-foreground mt-1">
          Admin phone number is pre-registered as system property, preventing unauthorized changes
        </div>
      </div>
    </div>

    <div className="flex items-start gap-3 p-4 rounded-lg bg-background border border-border">
      <div className="text-xl">‚è±Ô∏è</div>
      <div className="flex-1">
        <div className="font-bold text-sm">Time-Limited Codes</div>
        <div className="text-xs text-muted-foreground mt-1">
          Verification codes expire after a short period for enhanced security
        </div>
      </div>
    </div>

    <div className="flex items-start gap-3 p-4 rounded-lg bg-background border border-border">
      <div className="text-xl">üë®‚Äçüíº</div>
      <div className="flex-1">
        <div className="font-bold text-sm">Admin-Only Access</div>
        <div className="text-xs text-muted-foreground mt-1">
          Only users with ADMIN role can request withdrawal confirmation codes
        </div>
      </div>
    </div>
  </div>
</div>

## Best Practices

<div className="space-y-3 my-6">
  <div className="p-4 rounded-lg border border-border bg-muted/30">
    <div className="flex items-start gap-3">
      <span className="text-lg">‚úÖ</span>
      <div>
        <div className="font-bold text-sm">Request Code Just Before Approval</div>
        <div className="text-xs text-muted-foreground mt-1">
          Request the 2FA code immediately before performing the approval/denial operation to minimize code expiration risk
        </div>
      </div>
    </div>
  </div>

  <div className="p-4 rounded-lg border border-border bg-muted/30">
    <div className="flex items-start gap-3">
      <span className="text-lg">‚úÖ</span>
      <div>
        <div className="font-bold text-sm">Verify Phone Number Registration</div>
        <div className="text-xs text-muted-foreground mt-1">
          Ensure admin phone number is correctly registered in system properties before using this mutation
        </div>
      </div>
    </div>
  </div>

  <div className="p-4 rounded-lg border border-border bg-muted/30">
    <div className="flex items-start gap-3">
      <span className="text-lg">‚úÖ</span>
      <div>
        <div className="font-bold text-sm">Handle SMS Delivery Delays</div>
        <div className="text-xs text-muted-foreground mt-1">
          Implement UI feedback to indicate code is being sent and may take a few moments to arrive
        </div>
      </div>
    </div>
  </div>

  <div className="p-4 rounded-lg border border-border bg-muted/30">
    <div className="flex items-start gap-3">
      <span className="text-lg">‚úÖ</span>
      <div>
        <div className="font-bold text-sm">Log All Code Requests</div>
        <div className="text-xs text-muted-foreground mt-1">
          Maintain audit logs of all 2FA code requests for security monitoring and compliance
        </div>
      </div>
    </div>
  </div>
</div>

## Related Operations

<Cards>
  <Card
    title="Confirm Crypto Withdrawal"
    href="/docs/api/Withdraw/confirm-crypto-withdrawal-request"
    description="Approve or deny crypto withdrawal requests (requires 2FA code)"
  />
  <Card
    title="Confirm PayPal Withdrawal"
    href="/docs/api/Withdraw/confirm-paypal-withdrawal-request"
    description="Approve or deny PayPal withdrawal requests (requires 2FA code)"
  />
  <Card
    title="Approve Fiat Withdrawal"
    href="/docs/api/Withdraw/approve-fiat-withdrawal-request"
    description="Approve bank withdrawal after manual transfer (requires 2FA code)"
  />
  <Card
    title="Withdrawal Overview"
    href="/docs/api/Withdraw/withdraw-summary"
    description="Complete withdrawal API system documentation"
  />
</Cards>

<div className="mt-8 p-6 rounded-xl border border-red-500/30 bg-gradient-to-r from-red-500/10 to-rose-500/10">
  <div className="flex items-center gap-3">
    <span className="text-2xl">üîê</span>
    <div>
      <div className="font-bold">Critical Security Operation</div>
      <div className="text-sm text-muted-foreground">Always request fresh 2FA codes for each withdrawal approval to maintain highest security standards</div>
    </div>
  </div>
</div>
