---
title: Confirm Crypto Withdrawal Request
description: Admin approval or denial of cryptocurrency withdrawal requests with 2FA
---

import { Callout } from 'fumadocs-ui/components/callout';
import { Card, Cards } from 'fumadocs-ui/components/card';

<div className="relative overflow-hidden rounded-2xl bg-gradient-to-br from-red-500/10 via-orange-500/5 to-background p-8 border border-red-500/20 mb-8">
  <div className="relative z-10">
    <h1 className="text-3xl md:text-4xl font-bold mb-4">
      Confirm Crypto Withdrawal Request
    </h1>
    <p className="text-lg text-muted-foreground mb-4">
      Approve or deny cryptocurrency withdrawal requests with 2FA verification
    </p>
    <div className="inline-block px-3 py-1 rounded-full bg-red-500/20 border border-red-500/30 text-red-400 text-sm font-medium">
      ADMIN Only
    </div>
  </div>
  <div className="absolute top-0 right-0 w-48 h-48 bg-red-500/5 rounded-full blur-3xl"></div>
</div>

## Overview

The `confirmCryptoWithdraw` mutation allows administrators to approve or deny cryptocurrency withdrawal requests. This operation requires 2FA SMS verification for security.

<Callout type="warn" title="Admin-Only Operation">
This mutation is accessible only to users with **ADMIN privileges** and requires a valid 2FA SMS code.
</Callout>

## GraphQL Schema

<div className="rounded-xl border border-red-500/30 bg-gradient-to-br from-red-500/10 to-red-500/5 p-6 my-6">
  <div className="flex items-center gap-3 mb-4">
    <span className="text-2xl">‚úÖ</span>
    <div>
      <div className="font-bold text-lg">Mutation Schema</div>
      <div className="text-sm text-muted-foreground">Approve or deny crypto withdrawal</div>
    </div>
  </div>

  ```graphql
  confirmCryptoWithdraw(
    id: Int!,
    status: Int!,
    deniedReason: String,
    code: String!
  ): Int
  ```
</div>

## Parameters

<div className="rounded-xl border border-blue-500/30 bg-gradient-to-br from-blue-500/10 to-blue-500/5 p-6 my-6">
  <div className="flex items-center gap-3 mb-4">
    <span className="text-2xl">üìã</span>
    <div>
      <div className="font-bold text-lg">Parameters</div>
    </div>
  </div>

  <div className="space-y-3">
    <div className="p-4 rounded-lg bg-background border border-border">
      <div className="flex items-center justify-between mb-2">
        <code className="font-semibold">id</code>
        <span className="px-2 py-1 rounded bg-red-500/20 border border-red-500/30 text-red-400 text-xs font-medium">Int! Required</span>
      </div>
      <div className="text-sm text-muted-foreground">
        The unique ID of the cryptocurrency withdrawal request to confirm
      </div>
    </div>

    <div className="p-4 rounded-lg bg-background border border-border">
      <div className="flex items-center justify-between mb-2">
        <code className="font-semibold">status</code>
        <span className="px-2 py-1 rounded bg-red-500/20 border border-red-500/30 text-red-400 text-xs font-medium">Int! Required</span>
      </div>
      <div className="text-sm text-muted-foreground mb-2">
        Action to take on the withdrawal request
      </div>
      <div className="grid grid-cols-2 gap-2 text-xs">
        <div className="bg-green-500/10 border border-green-500/20 px-3 py-2 rounded">
          <span className="font-semibold text-green-400">1:</span> Approve withdrawal
        </div>
        <div className="bg-red-500/10 border border-red-500/20 px-3 py-2 rounded">
          <span className="font-semibold text-red-400">2:</span> Deny withdrawal
        </div>
      </div>
    </div>

    <div className="p-4 rounded-lg bg-background border border-border">
      <div className="flex items-center justify-between mb-2">
        <code className="font-semibold">deniedReason</code>
        <span className="px-2 py-1 rounded bg-orange-500/20 border border-orange-500/30 text-orange-400 text-xs font-medium">String Optional</span>
      </div>
      <div className="text-sm text-muted-foreground mb-2">
        Reason for denial (required if status is 2)
      </div>
      <div className="text-xs bg-muted px-3 py-2 rounded">
        Examples: "Insufficient verification", "Suspicious activity", "Invalid wallet address"
      </div>
    </div>

    <div className="p-4 rounded-lg bg-background border border-border">
      <div className="flex items-center justify-between mb-2">
        <code className="font-semibold">code</code>
        <span className="px-2 py-1 rounded bg-red-500/20 border border-red-500/30 text-red-400 text-xs font-medium">String! Required</span>
      </div>
      <div className="text-sm text-muted-foreground">
        Admin 2FA verification code received via SMS from <code className="bg-muted px-1 rounded">sendWithdrawConfirmCode</code>
      </div>
    </div>
  </div>
</div>

## Return Value

<div className="rounded-xl border border-green-500/30 bg-gradient-to-br from-green-500/10 to-green-500/5 p-6 my-6">
  <div className="flex items-center gap-3 mb-4">
    <span className="text-2xl">üìä</span>
    <div>
      <div className="font-bold text-lg">Integer Response</div>
      <div className="text-sm text-muted-foreground">Updated status value</div>
    </div>
  </div>

  <div className="p-4 rounded-lg bg-background border border-border">
    <div className="font-semibold mb-2">Return Type: <code className="bg-muted px-2 py-1 rounded text-sm">Int</code></div>
    <div className="text-sm text-muted-foreground">
      Returns an integer indicating the updated status of the withdrawal request (1 for approved, 2 for denied).
    </div>
  </div>
</div>

## Example Mutations

<div className="space-y-6 my-6">
  <div>
    <div className="font-bold mb-3 flex items-center gap-2">
      <span>‚úÖ</span>
      <span>Approve Crypto Withdrawal</span>
    </div>

    ```graphql
    mutation {
      confirmCryptoWithdraw(
        id: 123,
        status: 1,
        code: "654321"
      )
    }
    ```

    <div className="mt-4 p-4 rounded-lg border border-border bg-muted/30">
      <div className="font-semibold text-sm mb-2">Response</div>
      ```json
      {
        "data": {
          "confirmCryptoWithdraw": 1
        }
      }
      ```
    </div>
  </div>

  <div>
    <div className="font-bold mb-3 flex items-center gap-2">
      <span>‚ùå</span>
      <span>Deny Crypto Withdrawal with Reason</span>
    </div>

    ```graphql
    mutation {
      confirmCryptoWithdraw(
        id: 124,
        status: 2,
        deniedReason: "Wallet address does not match verification records",
        code: "654321"
      )
    }
    ```

    <div className="mt-4 p-4 rounded-lg border border-border bg-muted/30">
      <div className="font-semibold text-sm mb-2">Response</div>
      ```json
      {
        "data": {
          "confirmCryptoWithdraw": 2
        }
      }
      ```
    </div>
  </div>
</div>

## Implementation Example

<div className="my-6">
  ```typescript
  async function reviewCryptoWithdrawal(
    requestId: number,
    approve: boolean,
    denialReason?: string
  ) {
    try {
      // Step 1: Request 2FA code
      const codeRequest = await client.request(gql`
        mutation {
          sendWithdrawConfirmCode
        }
      `);

      if (!codeRequest.sendWithdrawConfirmCode) {
        throw new Error('Failed to send 2FA code');
      }

      console.log('‚úÖ 2FA code sent to admin phone');

      // Step 2: Get 2FA code from admin
      const twoFactorCode = await promptAdminFor2FACode();

      // Step 3: Confirm withdrawal
      const result = await client.request(gql`
        mutation ConfirmCrypto(
          $id: Int!,
          $status: Int!,
          $deniedReason: String,
          $code: String!
        ) {
          confirmCryptoWithdraw(
            id: $id,
            status: $status,
            deniedReason: $deniedReason,
            code: $code
          )
        }
      `, {
        id: requestId,
        status: approve ? 1 : 2,
        deniedReason: approve ? null : denialReason,
        code: twoFactorCode
      });

      if (approve) {
        console.log('‚úÖ Crypto withdrawal approved');
        // Trigger blockchain transaction
        await processBlockchainWithdrawal(requestId);
      } else {
        console.log('‚ùå Crypto withdrawal denied');
      }

      return result.confirmCryptoWithdraw;

    } catch (error) {
      console.error('Withdrawal confirmation failed:', error);
      throw error;
    }
  }
  ```
</div>

## Admin Workflow

<div className="rounded-xl border border-purple-500/30 bg-gradient-to-br from-purple-500/10 to-purple-500/5 p-6 my-6">
  <div className="font-bold text-lg mb-4">Complete Admin Review Process</div>

  <div className="space-y-4">
    <div className="flex items-start gap-3">
      <div className="w-8 h-8 rounded-full bg-purple-500/20 flex items-center justify-center text-purple-400 font-bold flex-shrink-0">1</div>
      <div>
        <div className="font-bold text-sm">Review Withdrawal Request</div>
        <div className="text-xs text-muted-foreground mt-1">Check withdrawal details, user verification status, and wallet address validity</div>
      </div>
    </div>

    <div className="flex items-start gap-3">
      <div className="w-8 h-8 rounded-full bg-purple-500/20 flex items-center justify-center text-purple-400 font-bold flex-shrink-0">2</div>
      <div>
        <div className="font-bold text-sm">Request 2FA Code</div>
        <div className="text-xs text-muted-foreground mt-1">Call <code className="bg-muted px-1 rounded">sendWithdrawConfirmCode</code> to receive SMS verification</div>
      </div>
    </div>

    <div className="flex items-start gap-3">
      <div className="w-8 h-8 rounded-full bg-purple-500/20 flex items-center justify-center text-purple-400 font-bold flex-shrink-0">3</div>
      <div>
        <div className="font-bold text-sm">Make Decision</div>
        <div className="text-xs text-muted-foreground mt-1">Approve (status: 1) or deny (status: 2) with reason if denying</div>
      </div>
    </div>

    <div className="flex items-start gap-3">
      <div className="w-8 h-8 rounded-full bg-purple-500/20 flex items-center justify-center text-purple-400 font-bold flex-shrink-0">4</div>
      <div>
        <div className="font-bold text-sm">Confirm with 2FA</div>
        <div className="text-xs text-muted-foreground mt-1">Submit decision with 2FA code using <code className="bg-muted px-1 rounded">confirmCryptoWithdraw</code></div>
      </div>
    </div>

    <div className="flex items-start gap-3">
      <div className="w-8 h-8 rounded-full bg-purple-500/20 flex items-center justify-center text-purple-400 font-bold flex-shrink-0">5</div>
      <div>
        <div className="font-bold text-sm">Process Blockchain Transaction</div>
        <div className="text-xs text-muted-foreground mt-1">If approved, initiate blockchain transfer to user's destination wallet</div>
      </div>
    </div>
  </div>
</div>

## Security Features

<div className="rounded-xl border border-red-500/30 bg-gradient-to-br from-red-500/10 to-red-500/5 p-6 my-6">
  <div className="font-bold text-lg mb-4 flex items-center gap-2">
    <span>üîí</span>
    <span>Security Measures</span>
  </div>

  <div className="space-y-3">
    <div className="flex items-start gap-3 p-4 rounded-lg bg-background border border-border">
      <div className="text-xl">üì±</div>
      <div className="flex-1">
        <div className="font-bold text-sm">2FA SMS Required</div>
        <div className="text-xs text-muted-foreground mt-1">
          All approvals/denials require valid 2FA SMS verification code
        </div>
      </div>
    </div>

    <div className="flex items-start gap-3 p-4 rounded-lg bg-background border border-border">
      <div className="text-xl">üë®‚Äçüíº</div>
      <div className="flex-1">
        <div className="font-bold text-sm">Admin-Only Access</div>
        <div className="text-xs text-muted-foreground mt-1">
          Only users with ADMIN role can confirm withdrawal requests
        </div>
      </div>
    </div>

    <div className="flex items-start gap-3 p-4 rounded-lg bg-background border border-border">
      <div className="text-xl">üìù</div>
      <div className="flex-1">
        <div className="font-bold text-sm">Mandatory Denial Reason</div>
        <div className="text-xs text-muted-foreground mt-1">
          When denying, must provide clear reason for user transparency
        </div>
      </div>
    </div>

    <div className="flex items-start gap-3 p-4 rounded-lg bg-background border border-border">
      <div className="text-xl">üìä</div>
      <div className="flex-1">
        <div className="font-bold text-sm">Audit Trail</div>
        <div className="text-xs text-muted-foreground mt-1">
          All approvals/denials logged with timestamp and admin identity
        </div>
      </div>
    </div>
  </div>
</div>

## Best Practices

<div className="space-y-3 my-6">
  <div className="p-4 rounded-lg border border-border bg-muted/30">
    <div className="flex items-start gap-3">
      <span className="text-lg">‚úÖ</span>
      <div>
        <div className="font-bold text-sm">Verify Wallet Address Format</div>
        <div className="text-xs text-muted-foreground mt-1">
          Check that destination wallet address is valid for the specified network
        </div>
      </div>
    </div>
  </div>

  <div className="p-4 rounded-lg border border-border bg-muted/30">
    <div className="flex items-start gap-3">
      <span className="text-lg">‚úÖ</span>
      <div>
        <div className="font-bold text-sm">Check User Verification Status</div>
        <div className="text-xs text-muted-foreground mt-1">
          Ensure user has completed required KYC/verification for withdrawal amount
        </div>
      </div>
    </div>
  </div>

  <div className="p-4 rounded-lg border border-border bg-muted/30">
    <div className="flex items-start gap-3">
      <span className="text-lg">‚úÖ</span>
      <div>
        <div className="font-bold text-sm">Provide Clear Denial Reasons</div>
        <div className="text-xs text-muted-foreground mt-1">
          When denying, give specific actionable reasons so users can resolve issues
        </div>
      </div>
    </div>
  </div>

  <div className="p-4 rounded-lg border border-border bg-muted/30">
    <div className="flex items-start gap-3">
      <span className="text-lg">‚ö°</span>
      <div>
        <div className="font-bold text-sm">Process Promptly</div>
        <div className="text-xs text-muted-foreground mt-1">
          Review and process withdrawal requests quickly to maintain good user experience
        </div>
      </div>
    </div>
  </div>
</div>

## Related Operations

<Cards>
  <Card
    title="Send Confirmation Code"
    href="/docs/api/Withdraw/send-withdraw-confirmation-code"
    description="Request 2FA SMS code for approval (ADMIN)"
  />
  <Card
    title="Crypto Withdrawal Request"
    href="/docs/api/Withdraw/crypto-withdrawal-request"
    description="User operation to request crypto withdrawal"
  />
  <Card
    title="Confirm PayPal Withdrawal"
    href="/docs/api/Withdraw/confirm-paypal-withdrawal-request"
    description="Approve/deny PayPal withdrawals (ADMIN)"
  />
  <Card
    title="Withdrawal Overview"
    href="/docs/api/Withdraw/withdraw-summary"
    description="Complete withdrawal API documentation"
  />
</Cards>

<div className="mt-8 p-6 rounded-xl border border-red-500/30 bg-gradient-to-r from-red-500/10 to-orange-500/10">
  <div className="flex items-center gap-3">
    <span className="text-2xl">üîê</span>
    <div>
      <div className="font-bold">Critical Security Operation</div>
      <div className="text-sm text-muted-foreground">Always verify wallet addresses and user details before approving crypto withdrawals - blockchain transactions are irreversible!</div>
    </div>
  </div>
</div>
